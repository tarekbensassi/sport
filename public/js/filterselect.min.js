!function(e){"use strict";e.fn.filterSelect=function(t,n){function r(e){return console.error(e),this}function a(e,t){t.prop("hidden",null),e.prop("hidden",!0),t.prop("disabled",null),e.prop("disabled",!0),e.prop("selected",null),t.prop("selected",null)}function i(e,t){function n(e){return parseInt(e.dataset[s.dataString.belongsto])!==a}function r(e){return t.indexOf(parseInt(e.dataset[s.dataString.belongsto]))===-1}var a=parseInt(t),i=Array.isArray(t)?r:n;return[].filter.call(e,i)}function o(e){for(var t=[],n=0;n<e.length;n++)t.push(parseInt(e[n].dataset[s.dataString.reference]));return t}function l(e){return[].filter.call(e,function(e){return e.value!=s.emptyValue})}function d(t,n){e(t).on("change",function(){var t=e(n),r=t.find("option"),d=e(this).find("option:not(:hidden)"),c=void 0!==t.data("allowempty"),f=e(this).find("option:selected"),u=f.length?f.data(s.dataString.reference):o(d),p=i(r,u,c);c&&(p=l(p)),a(e(p),t.find("option")),t.trigger("change")})}var c=!1;if(!this.is("select"))return r("filterSelect expects a select element!");if("string"==typeof t&&!e(t).is("select"))return r("filterSelect expect a select as the target element!");void 0!==t&&"object"!=typeof t||(n=t,c=!0);var f={target:"target",reference:"reference",belongsto:"belongsto"},s=e.extend({emptyValue:"-1",dataString:f},n);return n&&n.dataString&&(s.dataString=e.extend(f,n.dataString)),this.each(function(n,a){if(void 0!==e(a).find('option[value!="-1"]').data(s.dataString.reference)){var i=t;return c&&(i="#"+e(a).data(s.dataString.target)),e(i).length?void d(a,i):r("filterSelect could not find a target! Selector is: "+i)}})}}(jQuery);